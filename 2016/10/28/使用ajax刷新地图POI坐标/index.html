<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  

  

  

  

  

  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="jQuery,WebGIS," />





  <link rel="alternate" href="/atom.xml" title="Oozie's Blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.png?v=5.0.2" />






<meta name="description" content="æœ€è¿‘åšçš„é¡¹ç›®ï¼Œæˆ‘è´Ÿè´£çš„æ¨¡å—æ¶‰åŠåˆ°ç§»åŠ¨è®¾å¤‡çš„ä½ç½®å’Œè½¨è¿¹çš„ç›‘æ§ï¼Œéœ€è¦å°†è®¾å¤‡çš„å®æ—¶ä½ç½®ä¿¡æ¯å±•ç°åœ¨åœ°å›¾ä¸Šï¼Œæ³¨æ„æ˜¯å®æ—¶çš„ã€‚å®Œæ•´ä¸šåŠ¡æµç¨‹æ˜¯ï¼Œç§»åŠ¨è®¾å¤‡æ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆ10så·¦å³ï¼‰å°†è‡ªå·±ä½ç½®ä¿¡æ¯ï¼ˆç»çº¬åº¦ï¼‰åæ ‡ä¸Šä¼ è‡³æ•°æ®åº“ä¸­ï¼ŒWebæµè§ˆå™¨ç½‘é¡µä¸æ–­è·å–æœ€æ–°çš„åæ ‡ï¼Œå¹¶å°†è®¾å¤‡åœ¨Webåœ°å›¾ä¸Šçš„ä½ç½®åˆ·æ–°åˆ°è¯¥åæ ‡ï¼Œè¾¾åˆ°è®¾å¤‡ä½ç½®ç›‘æ§çš„ç›®çš„ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡">
<meta property="og:url" content="http://GISering.github.io/2016/10/28/ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡/index.html">
<meta property="og:site_name" content="Oozie's Blog">
<meta property="og:description" content="æœ€è¿‘åšçš„é¡¹ç›®ï¼Œæˆ‘è´Ÿè´£çš„æ¨¡å—æ¶‰åŠåˆ°ç§»åŠ¨è®¾å¤‡çš„ä½ç½®å’Œè½¨è¿¹çš„ç›‘æ§ï¼Œéœ€è¦å°†è®¾å¤‡çš„å®æ—¶ä½ç½®ä¿¡æ¯å±•ç°åœ¨åœ°å›¾ä¸Šï¼Œæ³¨æ„æ˜¯å®æ—¶çš„ã€‚å®Œæ•´ä¸šåŠ¡æµç¨‹æ˜¯ï¼Œç§»åŠ¨è®¾å¤‡æ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆ10så·¦å³ï¼‰å°†è‡ªå·±ä½ç½®ä¿¡æ¯ï¼ˆç»çº¬åº¦ï¼‰åæ ‡ä¸Šä¼ è‡³æ•°æ®åº“ä¸­ï¼ŒWebæµè§ˆå™¨ç½‘é¡µä¸æ–­è·å–æœ€æ–°çš„åæ ‡ï¼Œå¹¶å°†è®¾å¤‡åœ¨Webåœ°å›¾ä¸Šçš„ä½ç½®åˆ·æ–°åˆ°è¯¥åæ ‡ï¼Œè¾¾åˆ°è®¾å¤‡ä½ç½®ç›‘æ§çš„ç›®çš„ã€‚">
<meta property="og:image" content="http://ww2.sinaimg.cn/large/006y8mN6gw1f9f1h7cdc0g30tz0eek17.gif">
<meta property="og:updated_time" content="2016-11-03T09:21:16.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡">
<meta name="twitter:description" content="æœ€è¿‘åšçš„é¡¹ç›®ï¼Œæˆ‘è´Ÿè´£çš„æ¨¡å—æ¶‰åŠåˆ°ç§»åŠ¨è®¾å¤‡çš„ä½ç½®å’Œè½¨è¿¹çš„ç›‘æ§ï¼Œéœ€è¦å°†è®¾å¤‡çš„å®æ—¶ä½ç½®ä¿¡æ¯å±•ç°åœ¨åœ°å›¾ä¸Šï¼Œæ³¨æ„æ˜¯å®æ—¶çš„ã€‚å®Œæ•´ä¸šåŠ¡æµç¨‹æ˜¯ï¼Œç§»åŠ¨è®¾å¤‡æ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆ10så·¦å³ï¼‰å°†è‡ªå·±ä½ç½®ä¿¡æ¯ï¼ˆç»çº¬åº¦ï¼‰åæ ‡ä¸Šä¼ è‡³æ•°æ®åº“ä¸­ï¼ŒWebæµè§ˆå™¨ç½‘é¡µä¸æ–­è·å–æœ€æ–°çš„åæ ‡ï¼Œå¹¶å°†è®¾å¤‡åœ¨Webåœ°å›¾ä¸Šçš„ä½ç½®åˆ·æ–°åˆ°è¯¥åæ ‡ï¼Œè¾¾åˆ°è®¾å¤‡ä½ç½®ç›‘æ§çš„ç›®çš„ã€‚">
<meta name="twitter:image" content="http://ww2.sinaimg.cn/large/006y8mN6gw1f9f1h7cdc0g30tz0eek17.gif">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"always"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '6339080000263685000',
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://GISering.github.io/2016/10/28/ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡/"/>


  <title> ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡ | Oozie's Blog </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta custom-logo">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Oozie's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">å¥½è®°æ€§ï¼Œä¸å¦‚å°åšå®¢</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">å‘è¡¨äº</span>
            <time itemprop="dateCreated" datetime="2016-10-28T11:11:31+08:00" content="2016-10-28">
              2016-10-28
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Front/" itemprop="url" rel="index">
                    <span itemprop="name">Front</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/10/28/ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/28/ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
         <span id="/2016/10/28/ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡/"class="leancloud_visitors"  data-flag-title="ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡">
            &nbsp; | &nbsp; é˜…è¯»æ¬¡æ•°
            </span>
      

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>æœ€è¿‘åšçš„é¡¹ç›®ï¼Œæˆ‘è´Ÿè´£çš„æ¨¡å—æ¶‰åŠåˆ°ç§»åŠ¨è®¾å¤‡çš„ä½ç½®å’Œè½¨è¿¹çš„ç›‘æ§ï¼Œéœ€è¦å°†è®¾å¤‡çš„å®æ—¶ä½ç½®ä¿¡æ¯å±•ç°åœ¨åœ°å›¾ä¸Šï¼Œæ³¨æ„æ˜¯<strong>å®æ—¶</strong>çš„ã€‚å®Œæ•´ä¸šåŠ¡æµç¨‹æ˜¯ï¼Œç§»åŠ¨è®¾å¤‡æ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆ10så·¦å³ï¼‰å°†è‡ªå·±ä½ç½®ä¿¡æ¯ï¼ˆç»çº¬åº¦ï¼‰åæ ‡ä¸Šä¼ è‡³æ•°æ®åº“ä¸­ï¼ŒWebæµè§ˆå™¨ç½‘é¡µä¸æ–­è·å–æœ€æ–°çš„åæ ‡ï¼Œå¹¶å°†è®¾å¤‡åœ¨Webåœ°å›¾ä¸Šçš„ä½ç½®åˆ·æ–°åˆ°è¯¥åæ ‡ï¼Œè¾¾åˆ°è®¾å¤‡ä½ç½®ç›‘æ§çš„ç›®çš„ã€‚</p>
<a id="more"></a>
<h1 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h1><p>åˆå­¦å‰ç«¯å¼€å‘ä¸¤ä¸ªæœˆï¼Œå¼¯å¼¯ç»•ç»•çš„ä¸œè¥¿å®åœ¨å¤ªå¤šï¼Œä¸ä¼šçš„å°±æ›´å¤šäº†ã€‚è¯»ä¹¦çš„æ—¶å€™ä»è€å¸æœºé‚£çŸ¥é“è¦è¾¾åˆ°è¿™ç§ç½‘é¡µå±€éƒ¨åˆ·æ–°çš„ç›®çš„å¾—ä½¿ç”¨Ajaxï¼Œç„¶è€Œæˆ‘å¯¹äºAjaxæŠ€æœ¯çš„äº†è§£çœŸçš„åªåœç•™åœ¨äº†è§£çš„é˜¶æ®µï¼Œå®ƒå…·ä½“æ˜¯å¹²ä»€ä¹ˆç”¨çš„ã€ç”¨åœ¨å“ªã€æ€ä¹ˆç”¨æˆ‘æ˜¯ä¸€æ¦‚ä¸çŸ¥ï¼Œæœ‰ç§â€œä¸æ˜è§‰å‰â€çš„æ„Ÿè§‰ã€‚ä¸è¿‡æ²¡å…³ç³»ï¼Œå’±ä»¬è‡ªå­¦èƒ½åŠ›å¼ºï¼Œæ¥å—æ–°ä¸œè¥¿å¿«ï¼ˆè£…*å®Œæ¯•ï¼Œè·‘~ğŸ™ˆï¼‰ã€‚äºæ˜¯æŸ¥è¯¢äº†ä¸€ä¸‹èµ„æ–™åœ¨ï¼Œåœ¨<a href="https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started" target="_blank" rel="external">MDN</a> ä¸­æ˜¯è¿™ä¹ˆè§£é‡Šçš„ï¼š</p>
<blockquote>
<p>AJAX stands for Asynchronous JavaScript and XML. In a nutshell, it is the use of the XMLHttpRequest object to communicate with server-side scripts. It can send as well as receive information in a variety of formats, including JSON, XML, HTML, and even text files. AJAXâ€™s most appealing characteristic, however, is its â€œasynchronousâ€ nature, which means it can do all of this without having to refresh the page. This lets you update portions of a page based upon user events.</p>
</blockquote>
<p>æ€»çš„æ¥è¯´Ajaxæœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>å‘æœåŠ¡å™¨æäº¤è¯·æ±‚æ—¶ä¸ç”¨é‡æ–°åŠ è½½é¡µé¢</li>
<li>è·å–å’Œå¤„ç†æ¥è‡ªæœåŠ¡å™¨è¿”å›çš„æ•°æ®  </li>
</ul>
<p>æœç„¶ï¼Œè¿™ä¸¤ä¸ªç‰¹ç‚¹ä¸å°±æ˜¯æˆ‘æƒ³è¦çš„ä¹ˆï¼Ÿç½‘é¡µåœ°å›¾ä¸æ–­å‘æœåŠ¡å™¨å‘é€è¯·æ±‚è€Œä¸ç”¨åˆ·æ–°é¡µé¢ï¼Œè·å–ç§»åŠ¨è®¾å¤‡çš„æœ€æ–°çš„ä½ç½®ä¿¡æ¯ï¼Œå¹¶å°†è¯¥ä½ç½®æ›´æ–°åœ¨ç½‘é¡µåœ°å›¾ä¸Šæ˜¾ç¤ºã€‚</p>
<h1 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h1><p>Ajaxæ˜¯åˆ©ç”¨<code>XMLHttpRequest</code>å¯¹è±¡åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¼ é€’ä¿¡æ¯çš„ï¼Œå®ƒåœ¨<a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest" target="_blank" rel="external">MDN</a>ä¸­æ˜¯è¿™æ ·å®šä¹‰çš„ï¼š</p>
<blockquote>
<p>XMLHttpRequest is an API that provides client functionality for transferring data between a client and a server. It provides an easy way to retrieve data from a URL without having to do a full page refresh. This enables a Web page to update just a part of the page without disrupting what the user is doing.  XMLHttpRequest is used heavily in AJAX programming.</p>
</blockquote>
<p>è¿™è®©æˆ‘ä¸ç¦æƒ³åˆ°ä¸€ä¸ªå’Œå®ƒé•¿å¾—å¾ˆåƒçš„<code>HttpRequest</code>,å®ƒä»¬ä¸¤æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<ol>
<li><code>XMLHttpRequest</code>æ˜¯ä¸€ä¸ªæ ‡å‡†çš„<strong>JavaScript</strong>å¯¹è±¡ï¼Œç”¨äºåœ¨æµè§ˆå™¨ä¸­é€šè¿‡jså‘æœåŠ¡å™¨å‘é€<strong><em>Request</em></strong>è¯·æ±‚ï¼›</li>
<li><code>HttpRequest</code>æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ç«¯çš„å¯¹è±¡ï¼Œä»£è¡¨ä¸€ä¸ªå‘æœåŠ¡å™¨çš„<strong><em>Request</em></strong>è¯·æ±‚ï¼›</li>
<li>æ€»çš„æ¥è¯´ï¼Œå®ƒä»¬ä¸€ä¸ªå·¥ä½œåœ¨<strong>æµè§ˆå™¨</strong>ä¸­ï¼Œä¸€ä¸ªå·¥ä½œåœ¨<strong>WebæœåŠ¡å™¨</strong>ä¸­ï¼Œæ‰®æ¼”ç€ä¸åŒçš„è§’è‰²ï¼›</li>
</ol>
<p>çŸ¥é“äº†<code>XMLHttpRequest</code>å¯¹è±¡ï¼Œè¯¥å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿä¸‹é¢æ˜¯ä¸€æ®µå®Œæ•´çš„ä½¿ç”¨ä»£ç æ®µï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</div><div class="line">	(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	  <span class="keyword">var</span> httpRequest;</div><div class="line">	  <span class="built_in">document</span>.getElementById(<span class="string">"ajaxButton"</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; makeRequest(<span class="string">'test.html'</span>); &#125;;</div><div class="line">	</div><div class="line">	  <span class="function"><span class="keyword">function</span> <span class="title">makeRequest</span>(<span class="params">url</span>) </span>&#123;</div><div class="line">	    httpRequest = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">	</div><div class="line">	    <span class="keyword">if</span> (!httpRequest) &#123;</div><div class="line">	      alert(<span class="string">'Giving up :( Cannot create an XMLHTTP instance'</span>);</div><div class="line">	      <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	    &#125;</div><div class="line">	    httpRequest.onreadystatechange = alertContents;</div><div class="line">	    httpRequest.open(<span class="string">'GET'</span>, url);</div><div class="line">	    httpRequest.send();</div><div class="line">	  &#125;</div><div class="line">	</div><div class="line">	  <span class="function"><span class="keyword">function</span> <span class="title">alertContents</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	    <span class="keyword">if</span> (httpRequest.readyState === XMLHttpRequest.DONE) &#123;</div><div class="line">	      <span class="keyword">if</span> (httpRequest.status === <span class="number">200</span>) &#123;</div><div class="line">	        alert(httpRequest.responseText);</div><div class="line">	      &#125; <span class="keyword">else</span> &#123;</div><div class="line">	        alert(<span class="string">'There was a problem with the request.'</span>);</div><div class="line">	      &#125;</div><div class="line">	    &#125;</div><div class="line">	  &#125;</div><div class="line">	&#125;)();</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<ol>
<li><p>é¦–å…ˆæ„å»º<code>XMLHttpRequest</code>å¯¹è±¡  </p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> httpRequest = <span class="keyword">new</span> XMLHttpRequest();</div></pre></td></tr></table></figure>
</li>
<li><p>å£°æ˜æœåŠ¡å™¨è¿”å›æ•°æ®åçš„å¤„ç†å‡½æ•°  </p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	httpRequest.onreadystatechange = alertContents;<span class="comment">//å‡½æ•°å</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<p> ===<br> æˆ–è€…   </p>
</li>
</ol>
<pre><code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	httpRequest.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>

===
åœ¨å›è°ƒå‡½æ•°é‡Œï¼Œé¦–å…ˆè¦åˆ¤æ–­***Request***çš„çŠ¶æ€ï¼š   

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="keyword">if</span> (httpRequest.readyState === XMLHttpRequest.DONE) &#123;</div><div class="line"><span class="comment">// everything is good, the response is received</span></div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">	    <span class="comment">// still not ready</span></div><div class="line">	&#125;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>

===
å¦‚æœ***Request***çš„çŠ¶æ€æ˜¯å®Œæˆï¼Œå†åˆ¤æ–­***Response code***ï¼š  

<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	if (httpRequest.status === 200) &#123;</div><div class="line">    // perfect!</div><div class="line">	&#125; else &#123;</div><div class="line">    // there was a problem with the request,</div><div class="line">    // for example the response may contain a 404 (NotFound)</div><div class="line">    // or 500 (Internal Server Error) response code</div><div class="line">	&#125;</div><div class="line">&lt;/script&gt;</div><div class="line">```     </div><div class="line">===             </div><div class="line">å¦‚æœè¿”å›ç æ˜¯**200**ï¼Œå°±å¯ä»¥è·å¾—æœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼Œå¹¶è¿›è¡Œå¤„ç†ï¼Œè·å–è¿”å›æ•°æ®çš„æ–¹æ³•ï¼š   </div><div class="line"></div><div class="line">```JavaScript</div><div class="line">&lt;script&gt;</div><div class="line">	httpRequest.responseText;//ä»¥å­—ç¬¦ä¸²çš„æ–¹å¼è·å–æœåŠ¡å™¨çš„Response</div><div class="line">	httpRequest.responseXML;//ä»¥XMLDocumentå¯¹è±¡çš„æ–¹å¼è·å–æœåŠ¡å™¨çš„Response</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>


å¦‚æœæ˜¯åŒæ­¥è¯·æ±‚ï¼Œè„šæœ¬ä¼šåœæ­¢è¿è¡Œï¼Œç­‰å¾…`send()`å‡½æ•°çš„è¿”å›ï¼Œæ‰€ä»¥å°±ä¸éœ€è¦æå‰å®šä¹‰å›è°ƒå‡½æ•°ï¼Œå¯ä»¥ç›´æ¥åœ¨`send()`æ–¹æ³•è¿”å›åï¼Œè·å–æœåŠ¡å™¨çš„è¿”å›æ•°æ®ï¼Œè¿›è¡Œè¿›ä¸€æ­¥æ“ä½œã€‚
</code></pre><ol>
<li><p>æäº¤<strong><em>Request</em></strong>è¯·æ±‚</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	httpRequest.open(&apos;GET&apos;, url, true);</div><div class="line"> 	httpRequest.send();</div><div class="line">	&lt;/script&gt;</div></pre></td></tr></table></figure>
<ul>
<li><code>open()</code>å‡½æ•°ç”¨äºåˆå§‹åŒ–è¯·æ±‚<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<strong><em>HTTP</em></strong>çš„<strong><em>Request</em></strong>æ–¹æ³•â€”â€”<em>GET, POST, HEAD</em>ï¼›</li>
<li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¤„ç†<strong><em>HTTP</em></strong>è¯·æ±‚çš„<strong>url</strong>åœ°å€ï¼›</li>
<li>ç¬¬ä¸‰ä¸ªæ˜¯å¯é€‰å‚æ•°ï¼Œç”¨äºè®¾å®šæ˜¯å¦ä»¥å¼‚æ­¥çš„æ–¹å¼å‘é€è¯·æ±‚ï¼Œé»˜è®¤æ˜¯<code>true</code>,å³ä»¥å¼‚æ­¥æ–¹å¼ã€‚</li>
</ul>
</li>
<li><code>send()</code>å‡½æ•°ç”¨äºå‘é€è¯·æ±‚ï¼Œå¦‚æœæ˜¯å¼‚æ­¥è¯·æ±‚ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•åœ¨è¯·æ±‚å‘é€æ—¶å°±ä¼šè¿”å›ï¼›å¦‚æœæ˜¯åŒæ­¥è¯·æ±‚ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•ç›´åˆ°<strong><em>Response</em></strong>è¿”å›æ—¶æ‰ä¼šè¿”å›ã€‚<code>send()</code>å‡½æ•°æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œç”¨äºè®¾ç½®Reauest bodyï¼Œå¦‚æœè¯·æ±‚æ–¹æ³•æ˜¯<em>GET</em>æˆ–<em>HEAD</em>ï¼Œè¯¥å‚æ•°å°†è¢«å¿½ç•¥å¹¶ä¸”Reauest bodyå°†è¢«ç½®ä¸ºç©ºã€‚</li>
</ul>
</li>
</ol>
<h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><p>é€šè¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œå¯ä»¥å‘ç°å¦‚æœç›´æ¥ç”¨<code>XMLHttpRequest</code>å®ç°Ajaxï¼Œæ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œå¥½åœ¨æœ‰å¼ºå¤§çš„<strong>jQuery</strong>ï¼Œå®ƒå°†<code>XMLHttpRequest</code>è¿›ä¸€æ­¥å°è£…ï¼Œä½¿ç”¨èµ·æ¥æ›´åŠ ä¾¿æ·ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$.ajax(&#123;</div><div class="line">	<span class="attr">type</span>: <span class="comment">//è¯·æ±‚çš„æ–¹æ³•â€˜getâ€™æˆ–â€˜postâ€™</span></div><div class="line">	url:	<span class="comment">//è¯·æ±‚çš„urlåœ°å€</span></div><div class="line">	data: <span class="comment">//è¯·æ±‚æ—¶å¸¦çš„æ•°æ®</span></div><div class="line">	<span class="keyword">async</span>:	<span class="comment">//æ˜¯å¦å¼‚æ­¥è¯·æ±‚ï¼Œé»˜è®¤ä¸ºtrue</span></div><div class="line">	success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">		<span class="comment">//è¯·æ±‚æˆåŠŸåçš„å›è°ƒå‡½æ•°ï¼Œdataä¸ºè¿”å›æ•°æ®</span></div><div class="line">	&#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>è¯¦ç»†è¯´æ˜å¯ä»¥å‚è€ƒ<a href="http://api.jquery.com/jQuery.ajax/" target="_blank" rel="external">jQueryå®˜æ–¹æ–‡æ¡£</a>ã€‚<br>ä¸ºäº†è¾¾åˆ°å®æ—¶åˆ·æ–°ä½ç½®ä¿¡æ¯çš„ç›®çš„ï¼Œæˆ‘æ˜¯è¿™æ ·è§£å†³çš„ï¼š  </p>
<ol>
<li>é¦–å…ˆç»™å®æ—¶ä»ç§»åŠ¨ç«¯ä¸Šä¼ çš„æ¯æ¡ä½ç½®ä¿¡æ¯è®°å½•æ·»åŠ ä¸€ä¸ªæ—¶é—´æˆ³ï¼›</li>
<li>åç«¯é€šè¿‡è®¾å¤‡IDå’Œæ—¶é—´æˆ³ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºæœ€æ–°çš„è®°å½•ï¼Œå¾—åˆ°ä½ç½®ä¿¡æ¯ï¼›</li>
<li>ç¼–å†™å¯¹åº”çš„Controlå±‚ï¼Œç»™å‰ç«¯è®¿é—®ï¼›</li>
<li>å‰ç«¯è®¾ç½®å®šæ—¶å™¨ï¼Œå¹¶åœ¨å®šæ—¶å™¨ç±»è°ƒç”¨$.ajax()æ–¹æ³•ï¼Œå®šæ—¶è°ƒç”¨ä»¥è·å–æœ€æ–°çš„ä½ç½®ä¿¡æ¯ã€‚</li>
</ol>
<p>æˆ‘çš„å¼€å‘ç¯å¢ƒæ˜¯<strong>J2EE SSM</strong>:</p>
<ul>
<li>åç«¯SQLè¯­å¥å¦‚ä¸‹</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">select coord_x, coord_y from table </div><div class="line">where deviceId = #&#123;deviceId&#125; and 2&gt;rownum</div><div class="line">order by createtime desc</div></pre></td></tr></table></figure>
<ul>
<li>å‰ç«¯jsä»£ç å¦‚ä¸‹</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">function refreshPos()&#123;     var BASE_PATH = &apos;&lt;%=basePath%&gt;&apos;;     var deviceId = &apos;&lt;%=deviceId%&gt;&apos;;     var url = BASE_PATH + &quot;control/mdpos/getMobileDeviceCurrentPos.action?deviceId=&quot; + deviceId + &quot;&amp;etc=&quot; + new Date().getTime();//è¯·æ±‚åœ°å€     $.ajax(&#123;       type: &quot;get&quot;,       url: url,       async: true,       success: function(data)&#123;   	  	  var x = parseFloat(data.sPos.coord_X);   	  	  var y = parseFloat(data.sPos.coord_Y);		  var currentPos = ol.proj.transform([x, y], &apos;EPSG:4326&apos;, &apos;EPSG:3857&apos;);   			point_overlay.setPosition(currentPos);//Openlayersçš„api	    &#125;	 &#125;);   &#125; </div><div class="line"></div><div class="line">setInterval(&quot;refreshPos()&quot;, 5000);//è®¾ç½®å®šæ—¶å™¨</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="http://ww2.sinaimg.cn/large/006y8mN6gw1f9f1h7cdc0g30tz0eek17.gif" alt=""></p>
<p>ä½ç½®æ˜¯æ¨¡æ‹Ÿçš„ï¼Œæ‰€ä»¥ç§»åŠ¨çš„å¾ˆå¿«ï¼Œåƒç¬ç§»ä¼¼çš„å“ˆå“ˆ~~~</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/jQuery/" rel="tag">#jQuery</a>
          
            <a href="/tags/WebGIS/" rel="tag">#WebGIS</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/10/24/Openlayer3åŸºæœ¬åœ°å›¾åŠŸèƒ½å®ç°2/" rel="next" title="Openlayer3åŸºæœ¬åœ°å›¾åŠŸèƒ½å®ç°(2)">
                <i class="fa fa-chevron-left"></i> Openlayer3åŸºæœ¬åœ°å›¾åŠŸèƒ½å®ç°(2)
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/10/28/ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡/"
           data-title="ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡" data-url="http://GISering.github.io/2016/10/28/ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="Oozie" />
          <p class="site-author-name" itemprop="name">Oozie</p>
          <p class="site-description motion-element" itemprop="description">å¤šè¯»ä¹¦ï¼Œå°‘å¹ç‰›</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">8</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/GISering" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://weibo.com/GISering" target="_blank" title="å¾®åš">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  å¾®åš
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#åˆ†æ"><span class="nav-number">1.</span> <span class="nav-text">åˆ†æ</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#åŸç†"><span class="nav-number">2.</span> <span class="nav-text">åŸç†</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ä½¿ç”¨"><span class="nav-number">3.</span> <span class="nav-text">ä½¿ç”¨</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
<div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Oozie</span>
</div>

<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span>äººè®¿é—®</span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span>æ¬¡æµè§ˆ</span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"oozie"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  

  

  
  
  
     <!-- custom analytics part create by xiamo -->
<script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
<script>AV.initialize("8sz47o4CgYJrGlA0bqwNuv0x-gzGzoHsz", "1IDHaszj5dK3kHdrPlavIerr");</script>
<script>
function showTime(Counter) {
	var query = new AV.Query(Counter);
	$(".leancloud_visitors").each(function() {
		var url = $(this).attr("id").trim();
		query.equalTo("url", url);
		query.find({
			success: function(results) {
				if (results.length == 0) {
					var content = $(document.getElementById(url)).text() + ': 0';
					$(document.getElementById(url)).text(content);
					return;
				}
				for (var i = 0; i < results.length; i++) {
					var object = results[i];
					var content = $(document.getElementById(url)).text() + ': ' + object.get('time');
					$(document.getElementById(url)).text(content);
				}
			},
			error: function(object, error) {
				console.log("Error: " + error.code + " " + error.message);
			}
		});

	});
}

function addCount(Counter) {
	var Counter = AV.Object.extend("Counter");
	url = $(".leancloud_visitors").attr('id').trim();
	title = $(".leancloud_visitors").attr('data-flag-title').trim();
	var query = new AV.Query(Counter);
	query.equalTo("url", url);
	query.find({
		success: function(results) {
			if (results.length > 0) {
				var counter = results[0];
				counter.fetchWhenSave(true);
				counter.increment("time");
				counter.save(null, {
					success: function(counter) {
						var content = $(document.getElementById(url)).text() + ': ' + counter.get('time');
						$(document.getElementById(url)).text(content);
					},
					error: function(counter, error) {
						console.log('Failed to save Visitor num, with error message: ' + error.message);
					}
				});
			} else {
				var newcounter = new Counter();
				newcounter.set("title", title);
				newcounter.set("url", url);
				newcounter.set("time", 1);
				newcounter.save(null, {
					success: function(newcounter) {
					    console.log("newcounter.get('time')="+newcounter.get('time'));
						var content = $(document.getElementById(url)).text() + ': ' + newcounter.get('time');
						$(document.getElementById(url)).text(content);
					},
					error: function(newcounter, error) {
						console.log('Failed to create');
					}
				});
			}
		},
		error: function(error) {
			console.log('Error:' + error.code + " " + error.message);
		}
	});
}
$(function() {
	var Counter = AV.Object.extend("Counter");
	if ($('.leancloud_visitors').length == 1) {
		addCount(Counter);
	} else if ($('.post-title-link').length > 1) {
		showTime(Counter);
	}
}); 
</script>
  
</body>
</html>
