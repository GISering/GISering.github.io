<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡ | Oozie&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="æœ€è¿‘åšçš„é¡¹ç›®ï¼Œæˆ‘è´Ÿè´£çš„æ¨¡å—æ¶‰åŠåˆ°ç§»åŠ¨è®¾å¤‡çš„ä½ç½®å’Œè½¨è¿¹çš„ç›‘æ§ï¼Œéœ€è¦å°†è®¾å¤‡çš„å®æ—¶ä½ç½®ä¿¡æ¯å±•ç°åœ¨åœ°å›¾ä¸Šï¼Œæ³¨æ„æ˜¯å®æ—¶çš„ã€‚å®Œæ•´ä¸šåŠ¡æµç¨‹æ˜¯ï¼Œç§»åŠ¨è®¾å¤‡æ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆ10så·¦å³ï¼‰å°†è‡ªå·±ä½ç½®ä¿¡æ¯ï¼ˆç»çº¬åº¦ï¼‰åæ ‡ä¸Šä¼ è‡³æ•°æ®åº“ä¸­ï¼ŒWebæµè§ˆå™¨ç½‘é¡µä¸æ–­è·å–æœ€æ–°çš„åæ ‡ï¼Œå¹¶å°†è®¾å¤‡åœ¨Webåœ°å›¾ä¸Šçš„ä½ç½®åˆ·æ–°åˆ°è¯¥åæ ‡ï¼Œè¾¾åˆ°è®¾å¤‡ä½ç½®ç›‘æ§çš„ç›®çš„ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡">
<meta property="og:url" content="http://GISering.github.io/2016/10/28/ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡/index.html">
<meta property="og:site_name" content="Oozie's Blog">
<meta property="og:description" content="æœ€è¿‘åšçš„é¡¹ç›®ï¼Œæˆ‘è´Ÿè´£çš„æ¨¡å—æ¶‰åŠåˆ°ç§»åŠ¨è®¾å¤‡çš„ä½ç½®å’Œè½¨è¿¹çš„ç›‘æ§ï¼Œéœ€è¦å°†è®¾å¤‡çš„å®æ—¶ä½ç½®ä¿¡æ¯å±•ç°åœ¨åœ°å›¾ä¸Šï¼Œæ³¨æ„æ˜¯å®æ—¶çš„ã€‚å®Œæ•´ä¸šåŠ¡æµç¨‹æ˜¯ï¼Œç§»åŠ¨è®¾å¤‡æ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆ10så·¦å³ï¼‰å°†è‡ªå·±ä½ç½®ä¿¡æ¯ï¼ˆç»çº¬åº¦ï¼‰åæ ‡ä¸Šä¼ è‡³æ•°æ®åº“ä¸­ï¼ŒWebæµè§ˆå™¨ç½‘é¡µä¸æ–­è·å–æœ€æ–°çš„åæ ‡ï¼Œå¹¶å°†è®¾å¤‡åœ¨Webåœ°å›¾ä¸Šçš„ä½ç½®åˆ·æ–°åˆ°è¯¥åæ ‡ï¼Œè¾¾åˆ°è®¾å¤‡ä½ç½®ç›‘æ§çš„ç›®çš„ã€‚">
<meta property="og:image" content="http://ww2.sinaimg.cn/large/006y8mN6gw1f9f1h7cdc0g30tz0eek17.gif">
<meta property="og:updated_time" content="2016-11-03T09:21:16.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡">
<meta name="twitter:description" content="æœ€è¿‘åšçš„é¡¹ç›®ï¼Œæˆ‘è´Ÿè´£çš„æ¨¡å—æ¶‰åŠåˆ°ç§»åŠ¨è®¾å¤‡çš„ä½ç½®å’Œè½¨è¿¹çš„ç›‘æ§ï¼Œéœ€è¦å°†è®¾å¤‡çš„å®æ—¶ä½ç½®ä¿¡æ¯å±•ç°åœ¨åœ°å›¾ä¸Šï¼Œæ³¨æ„æ˜¯å®æ—¶çš„ã€‚å®Œæ•´ä¸šåŠ¡æµç¨‹æ˜¯ï¼Œç§»åŠ¨è®¾å¤‡æ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆ10så·¦å³ï¼‰å°†è‡ªå·±ä½ç½®ä¿¡æ¯ï¼ˆç»çº¬åº¦ï¼‰åæ ‡ä¸Šä¼ è‡³æ•°æ®åº“ä¸­ï¼ŒWebæµè§ˆå™¨ç½‘é¡µä¸æ–­è·å–æœ€æ–°çš„åæ ‡ï¼Œå¹¶å°†è®¾å¤‡åœ¨Webåœ°å›¾ä¸Šçš„ä½ç½®åˆ·æ–°åˆ°è¯¥åæ ‡ï¼Œè¾¾åˆ°è®¾å¤‡ä½ç½®ç›‘æ§çš„ç›®çš„ã€‚">
<meta name="twitter:image" content="http://ww2.sinaimg.cn/large/006y8mN6gw1f9f1h7cdc0g30tz0eek17.gif">
  
    <link rel="alternative" href="/atom.xml" title="Oozie&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="//favicon.png">
  
  <script src="/style.js"></script>
  

</head>

<body>
  <div id="container">
    <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="http://p1.bqimg.com/4851/0dd5b8032cbd42ae.jpg" class="js-avatar show">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Oozie</a></h1>
		</hgroup>

		
		<p class="header-subtitle">å¥½è®°æ€§ï¼Œä¸å¦‚å°åšå®¢</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">ä¸»é¡µ</a></li>
	        
				<li><a href="/tags/éšç¬”">éšç¬”</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">æ‰€æœ‰æ–‡ç« </a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">æ ‡ç­¾</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">å…³äºæˆ‘</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/GISering" title="github">github</a>
		        
					<a class="weibo" target="_blank" href="/www.sina.GISering#" title="weibo">weibo</a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">Oozie</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="http://p1.bqimg.com/4851/0dd5b8032cbd42ae.jpg" class="js-avatar show">
				
			</div>
			<hgroup>
			  <h1 class="header-author">Oozie</h1>
			</hgroup>
			
			<p class="header-subtitle">å¥½è®°æ€§ï¼Œä¸å¦‚å°åšå®¢</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">ä¸»é¡µ</a></li>
		        
					<li><a href="/tags/éšç¬”">éšç¬”</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/GISering" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="/www.sina.GISering#" title="weibo">weibo</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        <article id="post-ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æœ€è¿‘åšçš„é¡¹ç›®ï¼Œæˆ‘è´Ÿè´£çš„æ¨¡å—æ¶‰åŠåˆ°ç§»åŠ¨è®¾å¤‡çš„ä½ç½®å’Œè½¨è¿¹çš„ç›‘æ§ï¼Œéœ€è¦å°†è®¾å¤‡çš„å®æ—¶ä½ç½®ä¿¡æ¯å±•ç°åœ¨åœ°å›¾ä¸Šï¼Œæ³¨æ„æ˜¯<strong>å®æ—¶</strong>çš„ã€‚å®Œæ•´ä¸šåŠ¡æµç¨‹æ˜¯ï¼Œç§»åŠ¨è®¾å¤‡æ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆ10så·¦å³ï¼‰å°†è‡ªå·±ä½ç½®ä¿¡æ¯ï¼ˆç»çº¬åº¦ï¼‰åæ ‡ä¸Šä¼ è‡³æ•°æ®åº“ä¸­ï¼ŒWebæµè§ˆå™¨ç½‘é¡µä¸æ–­è·å–æœ€æ–°çš„åæ ‡ï¼Œå¹¶å°†è®¾å¤‡åœ¨Webåœ°å›¾ä¸Šçš„ä½ç½®åˆ·æ–°åˆ°è¯¥åæ ‡ï¼Œè¾¾åˆ°è®¾å¤‡ä½ç½®ç›‘æ§çš„ç›®çš„ã€‚</p>
<a id="more"></a>
<h1 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h1><p>åˆå­¦å‰ç«¯å¼€å‘ä¸¤ä¸ªæœˆï¼Œå¼¯å¼¯ç»•ç»•çš„ä¸œè¥¿å®åœ¨å¤ªå¤šï¼Œä¸ä¼šçš„å°±æ›´å¤šäº†ã€‚è¯»ä¹¦çš„æ—¶å€™ä»è€å¸æœºé‚£çŸ¥é“è¦è¾¾åˆ°è¿™ç§ç½‘é¡µå±€éƒ¨åˆ·æ–°çš„ç›®çš„å¾—ä½¿ç”¨Ajaxï¼Œç„¶è€Œæˆ‘å¯¹äºAjaxæŠ€æœ¯çš„äº†è§£çœŸçš„åªåœç•™åœ¨äº†è§£çš„é˜¶æ®µï¼Œå®ƒå…·ä½“æ˜¯å¹²ä»€ä¹ˆç”¨çš„ã€ç”¨åœ¨å“ªã€æ€ä¹ˆç”¨æˆ‘æ˜¯ä¸€æ¦‚ä¸çŸ¥ï¼Œæœ‰ç§â€œä¸æ˜è§‰å‰â€çš„æ„Ÿè§‰ã€‚ä¸è¿‡æ²¡å…³ç³»ï¼Œå’±ä»¬è‡ªå­¦èƒ½åŠ›å¼ºï¼Œæ¥å—æ–°ä¸œè¥¿å¿«ï¼ˆè£…*å®Œæ¯•ï¼Œè·‘~ğŸ™ˆï¼‰ã€‚äºæ˜¯æŸ¥è¯¢äº†ä¸€ä¸‹èµ„æ–™åœ¨ï¼Œåœ¨<a href="https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started" target="_blank" rel="external">MDN</a> ä¸­æ˜¯è¿™ä¹ˆè§£é‡Šçš„ï¼š</p>
<blockquote>
<p>AJAX stands for Asynchronous JavaScript and XML. In a nutshell, it is the use of the XMLHttpRequest object to communicate with server-side scripts. It can send as well as receive information in a variety of formats, including JSON, XML, HTML, and even text files. AJAXâ€™s most appealing characteristic, however, is its â€œasynchronousâ€ nature, which means it can do all of this without having to refresh the page. This lets you update portions of a page based upon user events.</p>
</blockquote>
<p>æ€»çš„æ¥è¯´Ajaxæœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>å‘æœåŠ¡å™¨æäº¤è¯·æ±‚æ—¶ä¸ç”¨é‡æ–°åŠ è½½é¡µé¢</li>
<li>è·å–å’Œå¤„ç†æ¥è‡ªæœåŠ¡å™¨è¿”å›çš„æ•°æ®  </li>
</ul>
<p>æœç„¶ï¼Œè¿™ä¸¤ä¸ªç‰¹ç‚¹ä¸å°±æ˜¯æˆ‘æƒ³è¦çš„ä¹ˆï¼Ÿç½‘é¡µåœ°å›¾ä¸æ–­å‘æœåŠ¡å™¨å‘é€è¯·æ±‚è€Œä¸ç”¨åˆ·æ–°é¡µé¢ï¼Œè·å–ç§»åŠ¨è®¾å¤‡çš„æœ€æ–°çš„ä½ç½®ä¿¡æ¯ï¼Œå¹¶å°†è¯¥ä½ç½®æ›´æ–°åœ¨ç½‘é¡µåœ°å›¾ä¸Šæ˜¾ç¤ºã€‚</p>
<h1 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h1><p>Ajaxæ˜¯åˆ©ç”¨<code>XMLHttpRequest</code>å¯¹è±¡åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¼ é€’ä¿¡æ¯çš„ï¼Œå®ƒåœ¨<a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest" target="_blank" rel="external">MDN</a>ä¸­æ˜¯è¿™æ ·å®šä¹‰çš„ï¼š</p>
<blockquote>
<p>XMLHttpRequest is an API that provides client functionality for transferring data between a client and a server. It provides an easy way to retrieve data from a URL without having to do a full page refresh. This enables a Web page to update just a part of the page without disrupting what the user is doing.  XMLHttpRequest is used heavily in AJAX programming.</p>
</blockquote>
<p>è¿™è®©æˆ‘ä¸ç¦æƒ³åˆ°ä¸€ä¸ªå’Œå®ƒé•¿å¾—å¾ˆåƒçš„<code>HttpRequest</code>,å®ƒä»¬ä¸¤æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<ol>
<li><code>XMLHttpRequest</code>æ˜¯ä¸€ä¸ªæ ‡å‡†çš„<strong>JavaScript</strong>å¯¹è±¡ï¼Œç”¨äºåœ¨æµè§ˆå™¨ä¸­é€šè¿‡jså‘æœåŠ¡å™¨å‘é€<strong><em>Request</em></strong>è¯·æ±‚ï¼›</li>
<li><code>HttpRequest</code>æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ç«¯çš„å¯¹è±¡ï¼Œä»£è¡¨ä¸€ä¸ªå‘æœåŠ¡å™¨çš„<strong><em>Request</em></strong>è¯·æ±‚ï¼›</li>
<li>æ€»çš„æ¥è¯´ï¼Œå®ƒä»¬ä¸€ä¸ªå·¥ä½œåœ¨<strong>æµè§ˆå™¨</strong>ä¸­ï¼Œä¸€ä¸ªå·¥ä½œåœ¨<strong>WebæœåŠ¡å™¨</strong>ä¸­ï¼Œæ‰®æ¼”ç€ä¸åŒçš„è§’è‰²ï¼›</li>
</ol>
<p>çŸ¥é“äº†<code>XMLHttpRequest</code>å¯¹è±¡ï¼Œè¯¥å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿä¸‹é¢æ˜¯ä¸€æ®µå®Œæ•´çš„ä½¿ç”¨ä»£ç æ®µï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</div><div class="line">	(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	  <span class="keyword">var</span> httpRequest;</div><div class="line">	  <span class="built_in">document</span>.getElementById(<span class="string">"ajaxButton"</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; makeRequest(<span class="string">'test.html'</span>); &#125;;</div><div class="line">	</div><div class="line">	  <span class="function"><span class="keyword">function</span> <span class="title">makeRequest</span>(<span class="params">url</span>) </span>&#123;</div><div class="line">	    httpRequest = <span class="keyword">new</span> XMLHttpRequest();</div><div class="line">	</div><div class="line">	    <span class="keyword">if</span> (!httpRequest) &#123;</div><div class="line">	      alert(<span class="string">'Giving up :( Cannot create an XMLHTTP instance'</span>);</div><div class="line">	      <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	    &#125;</div><div class="line">	    httpRequest.onreadystatechange = alertContents;</div><div class="line">	    httpRequest.open(<span class="string">'GET'</span>, url);</div><div class="line">	    httpRequest.send();</div><div class="line">	  &#125;</div><div class="line">	</div><div class="line">	  <span class="function"><span class="keyword">function</span> <span class="title">alertContents</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	    <span class="keyword">if</span> (httpRequest.readyState === XMLHttpRequest.DONE) &#123;</div><div class="line">	      <span class="keyword">if</span> (httpRequest.status === <span class="number">200</span>) &#123;</div><div class="line">	        alert(httpRequest.responseText);</div><div class="line">	      &#125; <span class="keyword">else</span> &#123;</div><div class="line">	        alert(<span class="string">'There was a problem with the request.'</span>);</div><div class="line">	      &#125;</div><div class="line">	    &#125;</div><div class="line">	  &#125;</div><div class="line">	&#125;)();</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<ol>
<li><p>é¦–å…ˆæ„å»º<code>XMLHttpRequest</code>å¯¹è±¡  </p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> httpRequest = <span class="keyword">new</span> XMLHttpRequest();</div></pre></td></tr></table></figure>
</li>
<li><p>å£°æ˜æœåŠ¡å™¨è¿”å›æ•°æ®åçš„å¤„ç†å‡½æ•°  </p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	httpRequest.onreadystatechange = alertContents;<span class="comment">//å‡½æ•°å</span></div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>
<p> ===<br> æˆ–è€…   </p>
</li>
</ol>
<pre><code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	httpRequest.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>

===
åœ¨å›è°ƒå‡½æ•°é‡Œï¼Œé¦–å…ˆè¦åˆ¤æ–­***Request***çš„çŠ¶æ€ï¼š   

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	<span class="keyword">if</span> (httpRequest.readyState === XMLHttpRequest.DONE) &#123;</div><div class="line"><span class="comment">// everything is good, the response is received</span></div><div class="line">	&#125; <span class="keyword">else</span> &#123;</div><div class="line">	    <span class="comment">// still not ready</span></div><div class="line">	&#125;</div><div class="line">&lt;<span class="regexp">/script&gt;</span></div></pre></td></tr></table></figure>

===
å¦‚æœ***Request***çš„çŠ¶æ€æ˜¯å®Œæˆï¼Œå†åˆ¤æ–­***Response code***ï¼š  

<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	if (httpRequest.status === 200) &#123;</div><div class="line">    // perfect!</div><div class="line">	&#125; else &#123;</div><div class="line">    // there was a problem with the request,</div><div class="line">    // for example the response may contain a 404 (NotFound)</div><div class="line">    // or 500 (Internal Server Error) response code</div><div class="line">	&#125;</div><div class="line">&lt;/script&gt;</div><div class="line">```     </div><div class="line">===             </div><div class="line">å¦‚æœè¿”å›ç æ˜¯**200**ï¼Œå°±å¯ä»¥è·å¾—æœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼Œå¹¶è¿›è¡Œå¤„ç†ï¼Œè·å–è¿”å›æ•°æ®çš„æ–¹æ³•ï¼š   </div><div class="line"></div><div class="line">```JavaScript</div><div class="line">&lt;script&gt;</div><div class="line">	httpRequest.responseText;//ä»¥å­—ç¬¦ä¸²çš„æ–¹å¼è·å–æœåŠ¡å™¨çš„Response</div><div class="line">	httpRequest.responseXML;//ä»¥XMLDocumentå¯¹è±¡çš„æ–¹å¼è·å–æœåŠ¡å™¨çš„Response</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>


å¦‚æœæ˜¯åŒæ­¥è¯·æ±‚ï¼Œè„šæœ¬ä¼šåœæ­¢è¿è¡Œï¼Œç­‰å¾…`send()`å‡½æ•°çš„è¿”å›ï¼Œæ‰€ä»¥å°±ä¸éœ€è¦æå‰å®šä¹‰å›è°ƒå‡½æ•°ï¼Œå¯ä»¥ç›´æ¥åœ¨`send()`æ–¹æ³•è¿”å›åï¼Œè·å–æœåŠ¡å™¨çš„è¿”å›æ•°æ®ï¼Œè¿›è¡Œè¿›ä¸€æ­¥æ“ä½œã€‚
</code></pre><ol>
<li><p>æäº¤<strong><em>Request</em></strong>è¯·æ±‚</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">	httpRequest.open(&apos;GET&apos;, url, true);</div><div class="line"> 	httpRequest.send();</div><div class="line">	&lt;/script&gt;</div></pre></td></tr></table></figure>
<ul>
<li><code>open()</code>å‡½æ•°ç”¨äºåˆå§‹åŒ–è¯·æ±‚<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<strong><em>HTTP</em></strong>çš„<strong><em>Request</em></strong>æ–¹æ³•â€”â€”<em>GET, POST, HEAD</em>ï¼›</li>
<li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¤„ç†<strong><em>HTTP</em></strong>è¯·æ±‚çš„<strong>url</strong>åœ°å€ï¼›</li>
<li>ç¬¬ä¸‰ä¸ªæ˜¯å¯é€‰å‚æ•°ï¼Œç”¨äºè®¾å®šæ˜¯å¦ä»¥å¼‚æ­¥çš„æ–¹å¼å‘é€è¯·æ±‚ï¼Œé»˜è®¤æ˜¯<code>true</code>,å³ä»¥å¼‚æ­¥æ–¹å¼ã€‚</li>
</ul>
</li>
<li><code>send()</code>å‡½æ•°ç”¨äºå‘é€è¯·æ±‚ï¼Œå¦‚æœæ˜¯å¼‚æ­¥è¯·æ±‚ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•åœ¨è¯·æ±‚å‘é€æ—¶å°±ä¼šè¿”å›ï¼›å¦‚æœæ˜¯åŒæ­¥è¯·æ±‚ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•ç›´åˆ°<strong><em>Response</em></strong>è¿”å›æ—¶æ‰ä¼šè¿”å›ã€‚<code>send()</code>å‡½æ•°æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œç”¨äºè®¾ç½®Reauest bodyï¼Œå¦‚æœè¯·æ±‚æ–¹æ³•æ˜¯<em>GET</em>æˆ–<em>HEAD</em>ï¼Œè¯¥å‚æ•°å°†è¢«å¿½ç•¥å¹¶ä¸”Reauest bodyå°†è¢«ç½®ä¸ºç©ºã€‚</li>
</ul>
</li>
</ol>
<h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><p>é€šè¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œå¯ä»¥å‘ç°å¦‚æœç›´æ¥ç”¨<code>XMLHttpRequest</code>å®ç°Ajaxï¼Œæ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œå¥½åœ¨æœ‰å¼ºå¤§çš„<strong>jQuery</strong>ï¼Œå®ƒå°†<code>XMLHttpRequest</code>è¿›ä¸€æ­¥å°è£…ï¼Œä½¿ç”¨èµ·æ¥æ›´åŠ ä¾¿æ·ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$.ajax(&#123;</div><div class="line">	<span class="attr">type</span>: <span class="comment">//è¯·æ±‚çš„æ–¹æ³•â€˜getâ€™æˆ–â€˜postâ€™</span></div><div class="line">	url:	<span class="comment">//è¯·æ±‚çš„urlåœ°å€</span></div><div class="line">	data: <span class="comment">//è¯·æ±‚æ—¶å¸¦çš„æ•°æ®</span></div><div class="line">	<span class="keyword">async</span>:	<span class="comment">//æ˜¯å¦å¼‚æ­¥è¯·æ±‚ï¼Œé»˜è®¤ä¸ºtrue</span></div><div class="line">	success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</div><div class="line">		<span class="comment">//è¯·æ±‚æˆåŠŸåçš„å›è°ƒå‡½æ•°ï¼Œdataä¸ºè¿”å›æ•°æ®</span></div><div class="line">	&#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>è¯¦ç»†è¯´æ˜å¯ä»¥å‚è€ƒ<a href="http://api.jquery.com/jQuery.ajax/" target="_blank" rel="external">jQueryå®˜æ–¹æ–‡æ¡£</a>ã€‚<br>ä¸ºäº†è¾¾åˆ°å®æ—¶åˆ·æ–°ä½ç½®ä¿¡æ¯çš„ç›®çš„ï¼Œæˆ‘æ˜¯è¿™æ ·è§£å†³çš„ï¼š  </p>
<ol>
<li>é¦–å…ˆç»™å®æ—¶ä»ç§»åŠ¨ç«¯ä¸Šä¼ çš„æ¯æ¡ä½ç½®ä¿¡æ¯è®°å½•æ·»åŠ ä¸€ä¸ªæ—¶é—´æˆ³ï¼›</li>
<li>åç«¯é€šè¿‡è®¾å¤‡IDå’Œæ—¶é—´æˆ³ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºæœ€æ–°çš„è®°å½•ï¼Œå¾—åˆ°ä½ç½®ä¿¡æ¯ï¼›</li>
<li>ç¼–å†™å¯¹åº”çš„Controlå±‚ï¼Œç»™å‰ç«¯è®¿é—®ï¼›</li>
<li>å‰ç«¯è®¾ç½®å®šæ—¶å™¨ï¼Œå¹¶åœ¨å®šæ—¶å™¨ç±»è°ƒç”¨$.ajax()æ–¹æ³•ï¼Œå®šæ—¶è°ƒç”¨ä»¥è·å–æœ€æ–°çš„ä½ç½®ä¿¡æ¯ã€‚</li>
</ol>
<p>æˆ‘çš„å¼€å‘ç¯å¢ƒæ˜¯<strong>J2EE SSM</strong>:</p>
<ul>
<li>åç«¯SQLè¯­å¥å¦‚ä¸‹</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">select coord_x, coord_y from table </div><div class="line">where deviceId = #&#123;deviceId&#125; and 2&gt;rownum</div><div class="line">order by createtime desc</div></pre></td></tr></table></figure>
<ul>
<li>å‰ç«¯jsä»£ç å¦‚ä¸‹</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">function refreshPos()&#123;     var BASE_PATH = &apos;&lt;%=basePath%&gt;&apos;;     var deviceId = &apos;&lt;%=deviceId%&gt;&apos;;     var url = BASE_PATH + &quot;control/mdpos/getMobileDeviceCurrentPos.action?deviceId=&quot; + deviceId + &quot;&amp;etc=&quot; + new Date().getTime();//è¯·æ±‚åœ°å€     $.ajax(&#123;       type: &quot;get&quot;,       url: url,       async: true,       success: function(data)&#123;   	  	  var x = parseFloat(data.sPos.coord_X);   	  	  var y = parseFloat(data.sPos.coord_Y);		  var currentPos = ol.proj.transform([x, y], &apos;EPSG:4326&apos;, &apos;EPSG:3857&apos;);   			point_overlay.setPosition(currentPos);//Openlayersçš„api	    &#125;	 &#125;);   &#125; </div><div class="line"></div><div class="line">setInterval(&quot;refreshPos()&quot;, 5000);//è®¾ç½®å®šæ—¶å™¨</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="http://ww2.sinaimg.cn/large/006y8mN6gw1f9f1h7cdc0g30tz0eek17.gif" alt=""></p>
<p>ä½ç½®æ˜¯æ¨¡æ‹Ÿçš„ï¼Œæ‰€ä»¥ç§»åŠ¨çš„å¾ˆå¿«ï¼Œåƒç¬ç§»ä¼¼çš„å“ˆå“ˆ~~~</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/10/28/ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡/" class="archive-article-date">
  	<time datetime="2016-10-28T03:11:31.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-10-28</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WebGIS/">WebGIS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jQuery/">jQuery</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-price-tags"></i>
	<a class="article-category-link" href="/categories/Front/">Front</a>
	</div>


      <div class="clearfix"></div>
    </div>
  </div>
</article>

  
<nav id="article-nav">
  
  
    <a href="/2016/10/24/Openlayer3åŸºæœ¬åœ°å›¾åŠŸèƒ½å®ç°2/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">Openlayer3åŸºæœ¬åœ°å›¾åŠŸèƒ½å®ç°(2)</div>
      <i class="icon-circle-right"></i>
    </a>
  
</nav>




<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">Share to: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
	    <a class="jiathis_button_twitter"></a>
	    <a class="jiathis_button_plus"></a> 
	    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="//v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>






<div class="duoshuo">
	<!-- å¤šè¯´è¯„è®ºæ¡† start -->
	<div class="ds-thread" data-thread-key="ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡" data-title="ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡" data-url="http://GISering.github.io/2016/10/28/ä½¿ç”¨ajaxåˆ·æ–°åœ°å›¾POIåæ ‡/"></div>
	<!-- å¤šè¯´è¯„è®ºæ¡† end -->
	<!-- å¤šè¯´å…¬å…±JSä»£ç  start (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"oozie"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- å¤šè¯´å…¬å…±JSä»£ç  end -->
</div>





      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Oozie
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		//root: "/",
		//innerArchive: true
		
	}
</script>

<script src="//7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>


    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">å…¨éƒ¨</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">æ ‡ç­¾</span><i class="icon-price-tags"></i></li>
    
    
    
      <li data-hook="tools-section-me"><span class="text">æˆ‘</span><i class="icon-smile"></i></li>
    
  </ul>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				<a href="/tags/Html/" style="font-size: 10px;">Html</a> <a href="/tags/Openlayers/" style="font-size: 15px;">Openlayers</a> <a href="/tags/PHP/" style="font-size: 10px;">PHP</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/WebGIS/" style="font-size: 20px;">WebGIS</a> <a href="/tags/jQuery/" style="font-size: 15px;">jQuery</a> <a href="/tags/åŸºç¡€/" style="font-size: 10px;">åŸºç¡€</a> <a href="/tags/å·¥ä½œ/" style="font-size: 10px;">å·¥ä½œ</a> <a href="/tags/éšç¬”/" style="font-size: 10px;">éšç¬”</a>
    			</div>
    	</section>
    

    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">&lt;br&gt;ä¸€ä¸ªæ€€æ£ç å†œæ¢¦æƒ³,&lt;br&gt;å´â€œè¯¯å…¥æ­§é€”â€çš„ä¼ªæ¬ç –å·¥&lt;br&gt;</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>